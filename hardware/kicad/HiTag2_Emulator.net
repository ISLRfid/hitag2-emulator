(export (version "E")
  (design
    (source "HiTag2_Emulator")
    (date "2025-12-25")
    (tool "Hi-Tag 2 Emulator Generator v1.0")
    (comment "Simplified Hi-Tag 2 Emulator for Flipper Zero + Arduino integration")
  )
  (components
    (comp (ref "U1")
      (value "PIC32MX795F512L-80I/PF")
      (footprint "HiTag2_Emulator:TQFP-100_14x14mm_P0.5mm")
      (fields
        (field (name "Description") "Main MCU - 80MHz PIC32 with 512KB Flash"))
    )
    (comp (ref "U2")
      (value "AMS1117-3.3")
      (footprint "HiTag2_Emulator:SOT-223-3_TabPin2")
      (fields
        (field (name "Description") "3.3V LDO Voltage Regulator"))
    )
    (comp (ref "U3")
      (value "LM358")
      (footprint "HiTag2_Emulator:SOIC-8_3.9x4.9mm_P1.27mm")
      (fields
        (field (name "Description") "Dual Op-Amp for signal conditioning"))
    )
    (comp (ref "U4")
      (value "SN74LVC1G17")
      (footprint "HiTag2_Emulator:SOT-23-5")
      (fields
        (field (name "Description") "Single Schmitt Trigger Buffer"))
    )
    (comp (ref "Y1")
      (value "8MHz")
      (footprint "HiTag2_Emulator:Crystal_HC49-U_Vertical")
      (fields
        (field (name "Description") "8MHz Crystal for PIC32 clock"))
    )
    (comp (ref "C1")
      (value "22µF")
      (footprint "HiTag2_Emulator:C_0805_2012Metric")
      (fields
        (field (name "Description") "Input bulk capacitor"))
    )
    (comp (ref "C2")
      (value "10µF")
      (footprint "HiTag2_Emulator:C_0805_2012Metric")
      (fields
        (field (name "Description") "Output bulk capacitor"))
    )
    (comp (ref "C3")
      (value "100nF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Decoupling capacitor"))
    )
    (comp (ref "C4")
      (value "100nF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Decoupling capacitor"))
    )
    (comp (ref "C5")
      (value "100nF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Decoupling capacitor"))
    )
    (comp (ref "C6")
      (value "100nF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Decoupling capacitor"))
    )
    (comp (ref "C7")
      (value "100nF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Decoupling capacitor"))
    )
    (comp (ref "C8")
      (value "100nF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Decoupling capacitor"))
    )
    (comp (ref "C9")
      (value "18pF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Crystal load capacitor"))
    )
    (comp (ref "C10")
      (value "18pF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Crystal load capacitor"))
    )
    (comp (ref "C11")
      (value "10µF")
      (footprint "HiTag2_Emulator:C_0805_2012Metric")
      (fields
        (field (name "Description") "VCAP capacitor for PIC32 core"))
    )
    (comp (ref "C12")
      (value "4.7nF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Antenna tuning capacitor"))
    )
    (comp (ref "C13")
      (value "4.7nF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Antenna tuning capacitor"))
    )
    (comp (ref "C14")
      (value "4.7nF")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Antenna tuning capacitor"))
    )
    (comp (ref "R1")
      (value "10kΩ")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "MCLR pull-up resistor"))
    )
    (comp (ref "R2")
      (value "330Ω")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "LED1 current limiting resistor"))
    )
    (comp (ref "R3")
      (value "330Ω")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "LED2 current limiting resistor"))
    )
    (comp (ref "R4")
      (value "100kΩ")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Op-amp feedback resistor"))
    )
    (comp (ref "R5")
      (value "100kΩ")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Op-amp input resistor"))
    )
    (comp (ref "R6")
      (value "1MΩ")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "Antenna bias resistor"))
    )
    (comp (ref "R7")
      (value "100Ω")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "SPI MOSI series resistor"))
    )
    (comp (ref "R8")
      (value "100Ω")
      (footprint "HiTag2_Emulator:R_0603_1608Metric")
      (fields
        (field (name "Description") "SPI SCK series resistor"))
    )
    (comp (ref "LED1")
      (value "Green")
      (footprint "HiTag2_Emulator:LED_0603_1608Metric")
      (fields
        (field (name "Description") "Power/Status LED"))
    )
    (comp (ref "LED2")
      (value "Red")
      (footprint "HiTag2_Emulator:LED_0603_1608Metric")
      (fields
        (field (name "Description") "RF Activity LED"))
    )
    (comp (ref "J1")
      (value "SPI_Arduino")
      (footprint "HiTag2_Emulator:PinHeader_1x06_P2.54mm_Vertical")
      (fields
        (field (name "Description") "Arduino SPI Interface - MOSI/MISO/SCK/CS/5V/GND"))
    )
    (comp (ref "J2")
      (value "CTRL_Arduino")
      (footprint "HiTag2_Emulator:PinHeader_1x04_P2.54mm_Vertical")
      (fields
        (field (name "Description") "Arduino Control - RESET/TX_EN/IRQ/GND"))
    )
    (comp (ref "J3")
      (value "ICSP")
      (footprint "HiTag2_Emulator:PinHeader_1x03_P2.54mm_Vertical")
      (fields
        (field (name "Description") "ICSP Programming Header - MCLR/PGD/PGC"))
    )
    (comp (ref "J4")
      (value "ANTENNA")
      (footprint "HiTag2_Emulator:PinHeader_1x02_P2.54mm_Vertical")
      (fields
        (field (name "Description") "125kHz Antenna Coil Connection"))
    )
  )
  (nets
    (net (code "1") (name "GND")
      (node (ref "U1") (pin "15"))
      (node (ref "U1") (pin "31"))
      (node (ref "U1") (pin "36"))
      (node (ref "U1") (pin "45"))
      (node (ref "U1") (pin "65"))
      (node (ref "U1") (pin "75"))
      (node (ref "U2") (pin "1"))
      (node (ref "U3") (pin "4"))
      (node (ref "U4") (pin "3"))
      (node (ref "C1") (pin "2"))
      (node (ref "C2") (pin "2"))
      (node (ref "C3") (pin "2"))
      (node (ref "C4") (pin "2"))
      (node (ref "C5") (pin "2"))
      (node (ref "C6") (pin "2"))
      (node (ref "C7") (pin "2"))
      (node (ref "C8") (pin "2"))
      (node (ref "C9") (pin "2"))
      (node (ref "C10") (pin "2"))
      (node (ref "C11") (pin "2"))
      (node (ref "C12") (pin "2"))
      (node (ref "C13") (pin "2"))
      (node (ref "C14") (pin "2"))
      (node (ref "LED1") (pin "2"))
      (node (ref "LED2") (pin "2"))
      (node (ref "J1") (pin "6"))
      (node (ref "J2") (pin "4"))
      (node (ref "J4") (pin "2"))
    )
    (net (code "2") (name "VIN")
      (node (ref "U2") (pin "3"))
      (node (ref "C1") (pin "1"))
      (node (ref "J1") (pin "5"))
    )
    (net (code "3") (name "3V3")
      (node (ref "U1") (pin "2"))
      (node (ref "U1") (pin "16"))
      (node (ref "U1") (pin "30"))
      (node (ref "U1") (pin "37"))
      (node (ref "U1") (pin "46"))
      (node (ref "U1") (pin "55"))
      (node (ref "U1") (pin "62"))
      (node (ref "U1") (pin "86"))
      (node (ref "U2") (pin "2"))
      (node (ref "U3") (pin "8"))
      (node (ref "U4") (pin "5"))
      (node (ref "C2") (pin "1"))
      (node (ref "C3") (pin "1"))
      (node (ref "C4") (pin "1"))
      (node (ref "C5") (pin "1"))
      (node (ref "C6") (pin "1"))
      (node (ref "C7") (pin "1"))
      (node (ref "C8") (pin "1"))
      (node (ref "R1") (pin "1"))
      (node (ref "R2") (pin "1"))
      (node (ref "R3") (pin "1"))
    )
    (net (code "4") (name "MCLR")
      (node (ref "U1") (pin "13"))
      (node (ref "R1") (pin "2"))
      (node (ref "J2") (pin "1"))
      (node (ref "J3") (pin "1"))
    )
    (net (code "5") (name "OSC1")
      (node (ref "U1") (pin "64"))
      (node (ref "Y1") (pin "1"))
      (node (ref "C9") (pin "1"))
    )
    (net (code "6") (name "OSC2")
      (node (ref "U1") (pin "63"))
      (node (ref "Y1") (pin "2"))
      (node (ref "C10") (pin "1"))
    )
    (net (code "7") (name "VCAP")
      (node (ref "U1") (pin "85"))
      (node (ref "C11") (pin "1"))
    )
    (net (code "8") (name "SPI_MOSI")
      (node (ref "U1") (pin "9"))
      (node (ref "R7") (pin "2"))
    )
    (net (code "9") (name "MOSI")
      (node (ref "R7") (pin "1"))
      (node (ref "J1") (pin "1"))
    )
    (net (code "10") (name "MISO")
      (node (ref "U1") (pin "72"))
      (node (ref "J1") (pin "2"))
    )
    (net (code "11") (name "SPI_SCK")
      (node (ref "U1") (pin "70"))
      (node (ref "R8") (pin "2"))
    )
    (net (code "12") (name "SCK")
      (node (ref "R8") (pin "1"))
      (node (ref "J1") (pin "3"))
    )
    (net (code "13") (name "CS")
      (node (ref "U1") (pin "69"))
      (node (ref "J1") (pin "4"))
    )
    (net (code "14") (name "TX_EN")
      (node (ref "U1") (pin "17"))
      (node (ref "J2") (pin "2"))
    )
    (net (code "15") (name "IRQ")
      (node (ref "U1") (pin "38"))
      (node (ref "J2") (pin "3"))
    )
    (net (code "16") (name "RF_OUT")
      (node (ref "U1") (pin "18"))
      (node (ref "C12") (pin "1"))
      (node (ref "C13") (pin "1"))
      (node (ref "C14") (pin "1"))
      (node (ref "J4") (pin "1"))
    )
    (net (code "17") (name "RF_IN")
      (node (ref "U1") (pin "17"))
      (node (ref "U4") (pin "4"))
    )
    (net (code "18") (name "OPAMP_IN")
      (node (ref "U3") (pin "3"))
      (node (ref "R5") (pin "2"))
      (node (ref "R6") (pin "1"))
    )
    (net (code "19") (name "OPAMP_OUT")
      (node (ref "U3") (pin "1"))
      (node (ref "R4") (pin "1"))
      (node (ref "U4") (pin "2"))
    )
    (net (code "20") (name "OPAMP_FB")
      (node (ref "U3") (pin "2"))
      (node (ref "R4") (pin "2"))
    )
    (net (code "21") (name "COIL_SENSE")
      (node (ref "R5") (pin "1"))
      (node (ref "R6") (pin "2"))
    )
    (net (code "22") (name "STATUS1")
      (node (ref "U1") (pin "10"))
      (node (ref "R2") (pin "2"))
    )
    (net (code "23") (name "LED1_K")
      (node (ref "R2") (pin "1"))
      (node (ref "LED1") (pin "1"))
    )
    (net (code "24") (name "STATUS2")
      (node (ref "U1") (pin "11"))
      (node (ref "R3") (pin "2"))
    )
    (net (code "25") (name "LED2_K")
      (node (ref "R3") (pin "1"))
      (node (ref "LED2") (pin "1"))
    )
    (net (code "26") (name "PGD")
      (node (ref "U1") (pin "27"))
      (node (ref "J3") (pin "2"))
    )
    (net (code "27") (name "PGC")
      (node (ref "U1") (pin "26"))
      (node (ref "J3") (pin "3"))
    )
  )
)
