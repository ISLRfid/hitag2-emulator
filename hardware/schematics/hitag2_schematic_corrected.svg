<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1200" width="1800" height="1200">
  <style>
    .wire { stroke: #009900; stroke-width: 1.5; fill: none; }
    .power-wire { stroke: #990000; stroke-width: 1.5; fill: none; }
    .gnd-wire { stroke: #000000; stroke-width: 1.5; fill: none; }
    .component { stroke: #990000; stroke-width: 1.5; fill: none; }
    .ic-body { stroke: #000000; stroke-width: 2; fill: #FFFFCC; }
    .ic-body-small { stroke: #000000; stroke-width: 1.5; fill: #FFFFCC; }
    .pin-text { font-family: monospace; font-size: 8px; fill: #990000; }
    .pin-num { font-family: monospace; font-size: 7px; fill: #0000CC; }
    .net-label { font-family: monospace; font-size: 9px; fill: #009900; font-weight: bold; }
    .ref-text { font-family: sans-serif; font-size: 10px; fill: #0000CC; font-weight: bold; }
    .value-text { font-family: sans-serif; font-size: 8px; fill: #0000CC; }
    .title-text { font-family: sans-serif; font-size: 16px; fill: #000000; font-weight: bold; }
    .subtitle-text { font-family: sans-serif; font-size: 10px; fill: #000000; }
    .gnd-symbol { stroke: #000000; stroke-width: 1.5; fill: none; }
    .dot { fill: #009900; }
    .frame { stroke: #000000; stroke-width: 1; fill: none; }
  </style>
  
  <!-- Background and Frame -->
  <rect width="1800" height="1200" fill="white"/>
  <rect x="10" y="10" width="1780" height="1180" class="frame"/>
  
  <!-- Grid reference markers -->
  <text x="150" y="1185" class="subtitle-text">1</text>
  <text x="450" y="1185" class="subtitle-text">2</text>
  <text x="750" y="1185" class="subtitle-text">3</text>
  <text x="1050" y="1185" class="subtitle-text">4</text>
  <text x="1350" y="1185" class="subtitle-text">5</text>
  <text x="1650" y="1185" class="subtitle-text">6</text>
  <text x="15" y="200" class="subtitle-text">A</text>
  <text x="15" y="500" class="subtitle-text">B</text>
  <text x="15" y="800" class="subtitle-text">C</text>
  <text x="15" y="1100" class="subtitle-text">D</text>
  
  <!-- Title Block -->
  <rect x="1350" y="1050" width="430" height="130" stroke="#000" stroke-width="2" fill="none"/>
  <line x1="1350" y1="1080" x2="1780" y2="1080" stroke="#000" stroke-width="1"/>
  <line x1="1350" y1="1110" x2="1780" y2="1110" stroke="#000" stroke-width="1"/>
  <line x1="1350" y1="1140" x2="1780" y2="1140" stroke="#000" stroke-width="1"/>
  <text x="1360" y="1072" class="subtitle-text">Based on RFIDler architecture</text>
  <text x="1360" y="1100" class="subtitle-text">Simplified design for Hi-Tag 2 / Paxton NET2 emulation</text>
  <text x="1360" y="1128" class="subtitle-text">Flipper Zero + Arduino Integration</text>
  <text x="1360" y="1158" class="title-text">Title: Hi-Tag 2 Emulator (CORRECTED)</text>
  <text x="1360" y="1175" class="subtitle-text">Size: A3 | Date: 2025-12-26 | Rev: 1.1</text>
  <text x="1700" y="1175" class="subtitle-text">Sheet 1/1</text>
  
  <!-- ==================== U1 - PIC32MX795F512L (Center) ==================== -->
  <rect x="650" y="350" width="320" height="500" class="ic-body"/>
  <text x="810" y="590" text-anchor="middle" class="ref-text" style="font-size:14px">U1</text>
  <text x="810" y="610" text-anchor="middle" class="value-text" style="font-size:10px">PIC32MX795F512L-80I/PF</text>
  <text x="810" y="625" text-anchor="middle" class="value-text">80MHz | 512KB Flash</text>
  
  <!-- PIC32 Left Side Pins (VDD, MCLR, OSC, VCAP, SPI) -->
  <!-- VDD Pins -->
  <line x1="610" y1="370" x2="650" y2="370" class="power-wire"/>
  <text x="655" y="373" class="pin-text">VDD</text>
  <text x="605" y="373" text-anchor="end" class="pin-num">2</text>
  
  <line x1="610" y1="390" x2="650" y2="390" class="power-wire"/>
  <text x="655" y="393" class="pin-text">VDD</text>
  <text x="605" y="393" text-anchor="end" class="pin-num">16</text>
  
  <line x1="610" y1="410" x2="650" y2="410" class="power-wire"/>
  <text x="655" y="413" class="pin-text">VDD</text>
  <text x="605" y="413" text-anchor="end" class="pin-num">30</text>
  
  <line x1="610" y1="430" x2="650" y2="430" class="power-wire"/>
  <text x="655" y="433" class="pin-text">VDD</text>
  <text x="605" y="433" text-anchor="end" class="pin-num">37</text>
  
  <line x1="610" y1="450" x2="650" y2="450" class="power-wire"/>
  <text x="655" y="453" class="pin-text">VDD</text>
  <text x="605" y="453" text-anchor="end" class="pin-num">46</text>
  
  <line x1="610" y1="470" x2="650" y2="470" class="power-wire"/>
  <text x="655" y="473" class="pin-text">VDD</text>
  <text x="605" y="473" text-anchor="end" class="pin-num">55</text>
  
  <line x1="610" y1="490" x2="650" y2="490" class="power-wire"/>
  <text x="655" y="493" class="pin-text">VDD</text>
  <text x="605" y="493" text-anchor="end" class="pin-num">62</text>
  
  <line x1="610" y1="510" x2="650" y2="510" class="power-wire"/>
  <text x="655" y="513" class="pin-text">VDD</text>
  <text x="605" y="513" text-anchor="end" class="pin-num">86</text>
  
  <!-- MCLR -->
  <line x1="610" y1="550" x2="650" y2="550" class="wire"/>
  <text x="655" y="553" class="pin-text">MCLR</text>
  <text x="605" y="553" text-anchor="end" class="pin-num">13</text>
  
  <!-- OSC1/OSC2 -->
  <line x1="610" y1="590" x2="650" y2="590" class="wire"/>
  <text x="655" y="593" class="pin-text">OSC1/CLKI</text>
  <text x="605" y="593" text-anchor="end" class="pin-num">64</text>
  
  <line x1="610" y1="610" x2="650" y2="610" class="wire"/>
  <text x="655" y="613" class="pin-text">OSC2/CLKO</text>
  <text x="605" y="613" text-anchor="end" class="pin-num">63</text>
  
  <!-- VCAP -->
  <line x1="610" y1="650" x2="650" y2="650" class="wire"/>
  <text x="655" y="653" class="pin-text">VCAP</text>
  <text x="605" y="653" text-anchor="end" class="pin-num">85</text>
  
  <!-- SPI Pins (ACTIVE DIRECTLY - no RA0 confusion) -->
  <line x1="610" y1="700" x2="650" y2="700" class="wire"/>
  <text x="655" y="703" class="pin-text">SDI1</text>
  <text x="605" y="703" text-anchor="end" class="pin-num">25</text>
  
  <line x1="610" y1="720" x2="650" y2="720" class="wire"/>
  <text x="655" y="723" class="pin-text">SDO1</text>
  <text x="605" y="723" text-anchor="end" class="pin-num">72</text>
  
  <line x1="610" y1="740" x2="650" y2="740" class="wire"/>
  <text x="655" y="743" class="pin-text">SCK1</text>
  <text x="605" y="743" text-anchor="end" class="pin-num">70</text>
  
  <line x1="610" y1="760" x2="650" y2="760" class="wire"/>
  <text x="655" y="763" class="pin-text">SS1</text>
  <text x="605" y="763" text-anchor="end" class="pin-num">69</text>
  
  <!-- PIC32 Right Side Pins -->
  <!-- Status LEDs -->
  <line x1="970" y1="370" x2="1010" y2="370" class="wire"/>
  <text x="965" y="373" text-anchor="end" class="pin-text">RB10</text>
  <text x="1015" y="373" class="pin-num">23</text>
  
  <line x1="970" y1="390" x2="1010" y2="390" class="wire"/>
  <text x="965" y="393" text-anchor="end" class="pin-text">RB11</text>
  <text x="1015" y="393" class="pin-num">24</text>
  
  <!-- Control Signals - CORRECTED PINS -->
  <line x1="970" y1="430" x2="1010" y2="430" class="wire"/>
  <text x="965" y="433" text-anchor="end" class="pin-text">RA0/TX_EN</text>
  <text x="1015" y="433" class="pin-num">17</text>
  
  <line x1="970" y1="450" x2="1010" y2="450" class="wire"/>
  <text x="965" y="453" text-anchor="end" class="pin-text">RA1/IRQ</text>
  <text x="1015" y="453" class="pin-num">38</text>
  
  <!-- RF Pins - CORRECTED -->
  <line x1="970" y1="500" x2="1010" y2="500" class="wire"/>
  <text x="965" y="503" text-anchor="end" class="pin-text">RB5/RF_OUT</text>
  <text x="1015" y="503" class="pin-num">18</text>
  
  <line x1="970" y1="520" x2="1010" y2="520" class="wire"/>
  <text x="965" y="523" text-anchor="end" class="pin-text">RB4/RF_IN</text>
  <text x="1015" y="523" class="pin-num">12</text>
  
  <!-- ICSP Pins -->
  <line x1="970" y1="570" x2="1010" y2="570" class="wire"/>
  <text x="965" y="573" text-anchor="end" class="pin-text">PGEC2</text>
  <text x="1015" y="573" class="pin-num">26</text>
  
  <line x1="970" y1="590" x2="1010" y2="590" class="wire"/>
  <text x="965" y="593" text-anchor="end" class="pin-text">PGED2</text>
  <text x="1015" y="593" class="pin-num">27</text>
  
  <!-- PIC32 Bottom Pins (VSS) -->
  <line x1="720" y1="850" x2="720" y2="890" class="gnd-wire"/>
  <text x="720" y="865" text-anchor="middle" class="pin-num">15</text>
  <line x1="760" y1="850" x2="760" y2="890" class="gnd-wire"/>
  <text x="760" y="865" text-anchor="middle" class="pin-num">31</text>
  <line x1="800" y1="850" x2="800" y2="890" class="gnd-wire"/>
  <text x="800" y="865" text-anchor="middle" class="pin-num">36</text>
  <line x1="840" y1="850" x2="840" y2="890" class="gnd-wire"/>
  <text x="840" y="865" text-anchor="middle" class="pin-num">45</text>
  <line x1="880" y1="850" x2="880" y2="890" class="gnd-wire"/>
  <text x="880" y="865" text-anchor="middle" class="pin-num">65</text>
  <line x1="920" y1="850" x2="920" y2="890" class="gnd-wire"/>
  <text x="920" y="865" text-anchor="middle" class="pin-num">75</text>
  <text x="820" y="845" text-anchor="middle" class="pin-text">VSS</text>
  
  <!-- GND bar for VSS -->
  <line x1="700" y1="890" x2="940" y2="890" class="gnd-wire"/>
  <line x1="720" y1="900" x2="920" y2="900" class="gnd-wire"/>
  <line x1="740" y1="910" x2="900" y2="910" class="gnd-wire"/>
  <text x="820" y="930" text-anchor="middle" class="net-label">GND</text>
  
  <!-- ==================== POWER SUPPLY SECTION (Top Left) ==================== -->
  <text x="50" y="60" class="ref-text" style="font-size:12px">POWER SUPPLY</text>
  
  <!-- VIN Input -->
  <text x="40" y="120" class="net-label">VIN (+5V)</text>
  <line x1="80" y1="115" x2="120" y2="115" class="power-wire"/>
  <circle cx="120" cy="115" r="3" class="dot"/>
  
  <!-- C1 Input Bulk Capacitor -->
  <line x1="120" y1="115" x2="120" y2="130" class="component"/>
  <line x1="110" y1="130" x2="130" y2="130" class="component" stroke-width="3"/>
  <line x1="110" y1="138" x2="130" y2="138" class="component" stroke-width="3"/>
  <line x1="120" y1="138" x2="120" y2="155" class="component"/>
  <text x="135" y="138" class="ref-text">C1</text>
  <text x="135" y="150" class="value-text">22µF</text>
  <line x1="110" y1="155" x2="130" y2="155" class="gnd-symbol"/>
  <line x1="113" y1="160" x2="127" y2="160" class="gnd-symbol"/>
  <line x1="116" y1="165" x2="124" y2="165" class="gnd-symbol"/>
  
  <!-- U2 - AMS1117-3.3 LDO -->
  <rect x="170" y="90" width="80" height="50" class="ic-body-small"/>
  <text x="210" y="115" text-anchor="middle" class="ref-text">U2</text>
  <text x="210" y="128" text-anchor="middle" class="value-text">AMS1117-3.3</text>
  
  <line x1="120" y1="115" x2="170" y2="105" class="power-wire"/>
  <text x="165" y="102" text-anchor="end" class="pin-text">VIN</text>
  <text x="165" y="112" text-anchor="end" class="pin-num">3</text>
  
  <line x1="250" y1="105" x2="300" y2="105" class="power-wire"/>
  <text x="255" y="102" class="pin-text">VOUT</text>
  <text x="255" y="112" class="pin-num">2</text>
  
  <line x1="210" y1="140" x2="210" y2="170" class="gnd-wire"/>
  <text x="215" y="155" class="pin-num">1</text>
  <text x="215" y="165" class="pin-text">GND</text>
  <line x1="200" y1="170" x2="220" y2="170" class="gnd-symbol"/>
  <line x1="203" y1="175" x2="217" y2="175" class="gnd-symbol"/>
  <line x1="206" y1="180" x2="214" y2="180" class="gnd-symbol"/>
  
  <!-- C2 Output Bulk Capacitor -->
  <line x1="300" y1="105" x2="300" y2="120" class="component"/>
  <line x1="290" y1="120" x2="310" y2="120" class="component" stroke-width="3"/>
  <line x1="290" y1="128" x2="310" y2="128" class="component" stroke-width="3"/>
  <line x1="300" y1="128" x2="300" y2="145" class="component"/>
  <text x="315" y="128" class="ref-text">C2</text>
  <text x="315" y="140" class="value-text">10µF</text>
  <line x1="290" y1="145" x2="310" y2="145" class="gnd-symbol"/>
  <circle cx="300" cy="105" r="3" class="dot"/>
  
  <!-- 3V3 Rail -->
  <line x1="300" y1="105" x2="600" y2="105" class="power-wire"/>
  <text x="400" y="95" class="net-label">+3V3</text>
  
  <!-- Decoupling Capacitors C3-C8 -->
  <line x1="350" y1="105" x2="350" y2="120" class="component"/>
  <line x1="340" y1="120" x2="360" y2="120" class="component" stroke-width="3"/>
  <line x1="340" y1="128" x2="360" y2="128" class="component" stroke-width="3"/>
  <line x1="350" y1="128" x2="350" y2="145" class="component"/>
  <text x="365" y="128" class="ref-text">C3</text>
  <text x="365" y="140" class="value-text">100nF</text>
  <line x1="340" y1="145" x2="360" y2="145" class="gnd-symbol"/>
  <circle cx="350" cy="105" r="3" class="dot"/>
  
  <line x1="420" y1="105" x2="420" y2="120" class="component"/>
  <line x1="410" y1="120" x2="430" y2="120" class="component" stroke-width="3"/>
  <line x1="410" y1="128" x2="430" y2="128" class="component" stroke-width="3"/>
  <line x1="420" y1="128" x2="420" y2="145" class="component"/>
  <text x="435" y="128" class="ref-text">C4</text>
  <text x="435" y="140" class="value-text">100nF</text>
  <line x1="410" y1="145" x2="430" y2="145" class="gnd-symbol"/>
  <circle cx="420" cy="105" r="3" class="dot"/>
  
  <line x1="490" y1="105" x2="490" y2="120" class="component"/>
  <line x1="480" y1="120" x2="500" y2="120" class="component" stroke-width="3"/>
  <line x1="480" y1="128" x2="500" y2="128" class="component" stroke-width="3"/>
  <line x1="490" y1="128" x2="490" y2="145" class="component"/>
  <text x="505" y="128" class="ref-text">C5-C8</text>
  <text x="505" y="140" class="value-text">100nF x4</text>
  <line x1="480" y1="145" x2="500" y2="145" class="gnd-symbol"/>
  <circle cx="490" cy="105" r="3" class="dot"/>
  
  <!-- Connect 3V3 to VDD pins -->
  <line x1="560" y1="105" x2="560" y2="370" class="power-wire"/>
  <line x1="560" y1="370" x2="610" y2="370" class="power-wire"/>
  <line x1="560" y1="390" x2="610" y2="390" class="power-wire"/>
  <line x1="560" y1="410" x2="610" y2="410" class="power-wire"/>
  <line x1="560" y1="430" x2="610" y2="430" class="power-wire"/>
  <line x1="560" y1="450" x2="610" y2="450" class="power-wire"/>
  <line x1="560" y1="470" x2="610" y2="470" class="power-wire"/>
  <line x1="560" y1="490" x2="610" y2="490" class="power-wire"/>
  <line x1="560" y1="510" x2="610" y2="510" class="power-wire"/>
  <circle cx="560" cy="370" r="2" class="dot"/>
  <circle cx="560" cy="390" r="2" class="dot"/>
  <circle cx="560" cy="410" r="2" class="dot"/>
  <circle cx="560" cy="430" r="2" class="dot"/>
  <circle cx="560" cy="450" r="2" class="dot"/>
  <circle cx="560" cy="470" r="2" class="dot"/>
  <circle cx="560" cy="490" r="2" class="dot"/>
  <circle cx="560" cy="510" r="2" class="dot"/>
  <circle cx="560" cy="105" r="3" class="dot"/>
  
  <!-- ==================== CRYSTAL OSCILLATOR ==================== -->
  <text x="350" y="550" class="ref-text" style="font-size:11px">8MHz CRYSTAL</text>
  
  <!-- Y1 Crystal -->
  <rect x="420" y="570" width="50" height="25" stroke="#990000" stroke-width="2" fill="none"/>
  <line x1="430" y1="575" x2="430" y2="590" stroke="#990000" stroke-width="2"/>
  <line x1="460" y1="575" x2="460" y2="590" stroke="#990000" stroke-width="2"/>
  <text x="445" y="585" text-anchor="middle" class="ref-text">Y1</text>
  <text x="445" y="610" text-anchor="middle" class="value-text">8MHz</text>
  
  <!-- Crystal connections -->
  <line x1="470" y1="582" x2="610" y2="590" class="wire"/>
  <text x="530" y="585" class="net-label">OSC1</text>
  
  <line x1="470" y1="582" x2="500" y2="582" class="wire"/>
  <line x1="500" y1="582" x2="500" y2="610" class="wire"/>
  <line x1="500" y1="610" x2="610" y2="610" class="wire"/>
  <text x="530" y="620" class="net-label">OSC2</text>
  
  <!-- C9 Load Capacitor -->
  <line x1="520" y1="590" x2="520" y2="630" class="component"/>
  <line x1="510" y1="630" x2="530" y2="630" class="component" stroke-width="3"/>
  <line x1="510" y1="638" x2="530" y2="638" class="component" stroke-width="3"/>
  <line x1="520" y1="638" x2="520" y2="660" class="component"/>
  <text x="535" y="638" class="ref-text">C9</text>
  <text x="535" y="650" class="value-text">18pF</text>
  <line x1="510" y1="660" x2="530" y2="660" class="gnd-symbol"/>
  <circle cx="520" cy="590" r="2" class="dot"/>
  
  <!-- C10 Load Capacitor -->
  <line x1="550" y1="610" x2="550" y2="630" class="component"/>
  <line x1="540" y1="630" x2="560" y2="630" class="component" stroke-width="3"/>
  <line x1="540" y1="638" x2="560" y2="638" class="component" stroke-width="3"/>
  <line x1="550" y1="638" x2="550" y2="660" class="component"/>
  <text x="565" y="638" class="ref-text">C10</text>
  <text x="565" y="650" class="value-text">18pF</text>
  <line x1="540" y1="660" x2="560" y2="660" class="gnd-symbol"/>
  <circle cx="550" cy="610" r="2" class="dot"/>
  
  <!-- ==================== MCLR CIRCUIT ==================== -->
  <text x="350" y="470" class="ref-text" style="font-size:11px">MCLR RESET</text>
  
  <!-- R1 Pull-up -->
  <line x1="450" y1="490" x2="450" y2="510" class="component"/>
  <rect x="443" y="510" width="14" height="35" stroke="#990000" stroke-width="1.5" fill="none"/>
  <line x1="450" y1="545" x2="450" y2="550" class="component"/>
  <line x1="450" y1="550" x2="610" y2="550" class="wire"/>
  <text x="460" y="530" class="ref-text">R1</text>
  <text x="460" y="543" class="value-text">10kΩ</text>
  
  <!-- R1 to 3V3 -->
  <line x1="450" y1="490" x2="450" y2="470" class="power-wire"/>
  <text x="455" y="465" class="net-label">+3V3</text>
  
  <!-- MCLR net label -->
  <text x="530" y="545" class="net-label">MCLR</text>
  <circle cx="450" cy="550" r="2" class="dot"/>
  
  <!-- ==================== VCAP ==================== -->
  <!-- C11 VCAP Capacitor -->
  <line x1="450" y1="650" x2="610" y2="650" class="wire"/>
  <line x1="450" y1="650" x2="450" y2="670" class="component"/>
  <line x1="440" y1="670" x2="460" y2="670" class="component" stroke-width="3"/>
  <line x1="440" y1="678" x2="460" y2="678" class="component" stroke-width="3"/>
  <line x1="450" y1="678" x2="450" y2="700" class="component"/>
  <text x="465" y="678" class="ref-text">C11</text>
  <text x="465" y="690" class="value-text">10µF</text>
  <line x1="440" y1="700" x2="460" y2="700" class="gnd-symbol"/>
  <line x1="443" y1="705" x2="457" y2="705" class="gnd-symbol"/>
  <text x="450" y="720" text-anchor="middle" class="net-label">GND</text>
  <text x="530" y="645" class="net-label">VCAP</text>
  
  <!-- ==================== SPI INTERFACE ==================== -->
  <text x="50" y="680" class="ref-text" style="font-size:12px">SPI INTERFACE</text>
  
  <!-- J1 - SPI Arduino Connector -->
  <rect x="60" y="700" width="100" height="140" class="ic-body-small"/>
  <text x="110" y="760" text-anchor="middle" class="ref-text">J1</text>
  <text x="110" y="775" text-anchor="middle" class="value-text">SPI_Arduino</text>
  <text x="110" y="790" text-anchor="middle" class="value-text">1x6 Header</text>
  
  <!-- J1 Pins -->
  <line x1="160" y1="715" x2="200" y2="715" class="wire"/>
  <text x="165" y="718" class="pin-text">1 MOSI</text>
  
  <line x1="160" y1="735" x2="200" y2="735" class="wire"/>
  <text x="165" y="738" class="pin-text">2 MISO</text>
  
  <line x1="160" y1="755" x2="200" y2="755" class="wire"/>
  <text x="165" y="758" class="pin-text">3 SCK</text>
  
  <line x1="160" y1="775" x2="200" y2="775" class="wire"/>
  <text x="165" y="778" class="pin-text">4 CS</text>
  
  <line x1="160" y1="795" x2="200" y2="795" class="power-wire"/>
  <text x="165" y="798" class="pin-text">5 5V</text>
  <text x="205" y="798" class="net-label">VIN</text>
  
  <line x1="160" y1="815" x2="200" y2="815" class="gnd-wire"/>
  <text x="165" y="818" class="pin-text">6 GND</text>
  <line x1="200" y1="815" x2="200" y2="835" class="gnd-wire"/>
  <line x1="190" y1="835" x2="210" y2="835" class="gnd-symbol"/>
  
  <!-- R7 MOSI Series Resistor -->
  <line x1="200" y1="715" x2="280" y2="715" class="wire"/>
  <line x1="280" y1="715" x2="280" y2="700" class="wire"/>
  <line x1="280" y1="700" x2="350" y2="700" class="wire"/>
  <rect x="350" y="693" width="40" height="14" stroke="#990000" stroke-width="1.5" fill="none"/>
  <line x1="390" y1="700" x2="610" y2="700" class="wire"/>
  <text x="370" y="688" class="ref-text">R7</text>
  <text x="370" y="718" class="value-text">100Ω</text>
  <text x="250" y="710" class="net-label">MOSI</text>
  <text x="500" y="695" class="net-label">SPI_MOSI</text>
  
  <!-- MISO Direct -->
  <line x1="200" y1="735" x2="280" y2="735" class="wire"/>
  <line x1="280" y1="735" x2="280" y2="720" class="wire"/>
  <line x1="280" y1="720" x2="610" y2="720" class="wire"/>
  <text x="250" y="730" class="net-label">MISO</text>
  
  <!-- R8 SCK Series Resistor -->
  <line x1="200" y1="755" x2="280" y2="755" class="wire"/>
  <line x1="280" y1="755" x2="280" y2="740" class="wire"/>
  <line x1="280" y1="740" x2="350" y2="740" class="wire"/>
  <rect x="350" y="733" width="40" height="14" stroke="#990000" stroke-width="1.5" fill="none"/>
  <line x1="390" y1="740" x2="610" y2="740" class="wire"/>
  <text x="370" y="728" class="ref-text">R8</text>
  <text x="370" y="758" class="value-text">100Ω</text>
  <text x="250" y="750" class="net-label">SCK</text>
  <text x="500" y="735" class="net-label">SPI_SCK</text>
  
  <!-- CS Direct -->
  <line x1="200" y1="775" x2="280" y2="775" class="wire"/>
  <line x1="280" y1="775" x2="280" y2="760" class="wire"/>
  <line x1="280" y1="760" x2="610" y2="760" class="wire"/>
  <text x="250" y="770" class="net-label">CS</text>
  
  <!-- ==================== STATUS LEDs ==================== -->
  <text x="1100" y="330" class="ref-text" style="font-size:11px">STATUS LEDs</text>
  
  <!-- LED1 Green - Power/Status -->
  <line x1="1010" y1="370" x2="1080" y2="370" class="wire"/>
  <text x="1040" y="365" class="net-label">STATUS1</text>
  <rect x="1080" y="363" width="35" height="14" stroke="#990000" stroke-width="1.5" fill="none"/>
  <text x="1098" y="358" class="ref-text">R2</text>
  <text x="1120" y="373" class="value-text">330Ω</text>
  <line x1="1115" y1="370" x2="1140" y2="370" class="wire"/>
  <!-- LED symbol -->
  <polygon points="1140,360 1140,380 1160,370" stroke="#990000" stroke-width="1.5" fill="none"/>
  <line x1="1160" y1="360" x2="1160" y2="380" stroke="#990000" stroke-width="1.5"/>
  <text x="1150" y="395" class="ref-text">LED1</text>
  <text x="1150" y="408" class="value-text">Green</text>
  <line x1="1160" y1="370" x2="1180" y2="370" class="gnd-wire"/>
  <line x1="1180" y1="370" x2="1180" y2="390" class="gnd-wire"/>
  <line x1="1170" y1="390" x2="1190" y2="390" class="gnd-symbol"/>
  
  <!-- LED2 Red - RF Activity -->
  <line x1="1010" y1="390" x2="1080" y2="390" class="wire"/>
  <text x="1040" y="410" class="net-label">STATUS2</text>
  <rect x="1080" y="415" width="35" height="14" stroke="#990000" stroke-width="1.5" fill="none"/>
  <text x="1098" y="410" class="ref-text">R3</text>
  <text x="1120" y="425" class="value-text">330Ω</text>
  <line x1="1010" y1="390" x2="1010" y2="422" class="wire"/>
  <line x1="1010" y1="422" x2="1080" y2="422" class="wire"/>
  <line x1="1115" y1="422" x2="1140" y2="422" class="wire"/>
  <polygon points="1140,412 1140,432 1160,422" stroke="#990000" stroke-width="1.5" fill="none"/>
  <line x1="1160" y1="412" x2="1160" y2="432" stroke="#990000" stroke-width="1.5"/>
  <text x="1150" y="447" class="ref-text">LED2</text>
  <text x="1150" y="460" class="value-text">Red</text>
  <line x1="1160" y1="422" x2="1180" y2="422" class="gnd-wire"/>
  <line x1="1180" y1="422" x2="1180" y2="442" class="gnd-wire"/>
  <line x1="1170" y1="442" x2="1190" y2="442" class="gnd-symbol"/>
  
  <!-- ==================== CONTROL INTERFACE ==================== -->
  <text x="1250" y="330" class="ref-text" style="font-size:11px">CONTROL INTERFACE</text>
  
  <!-- J2 - Control Arduino Connector -->
  <rect x="1300" y="350" width="100" height="110" class="ic-body-small"/>
  <text x="1350" y="400" text-anchor="middle" class="ref-text">J2</text>
  <text x="1350" y="415" text-anchor="middle" class="value-text">CTRL_Arduino</text>
  <text x="1350" y="430" text-anchor="middle" class="value-text">1x4 Header</text>
  
  <!-- J2 Pins -->
  <line x1="1200" y1="365" x2="1300" y2="365" class="wire"/>
  <text x="1295" y="368" text-anchor="end" class="pin-text">RESET 1</text>
  
  <line x1="1200" y1="385" x2="1300" y2="385" class="wire"/>
  <text x="1295" y="388" text-anchor="end" class="pin-text">TX_EN 2</text>
  
  <line x1="1200" y1="405" x2="1300" y2="405" class="wire"/>
  <text x="1295" y="408" text-anchor="end" class="pin-text">IRQ 3</text>
  
  <line x1="1300" y1="425" x2="1280" y2="425" class="gnd-wire"/>
  <text x="1295" y="428" text-anchor="end" class="pin-text">GND 4</text>
  <line x1="1280" y1="425" x2="1280" y2="445" class="gnd-wire"/>
  <line x1="1270" y1="445" x2="1290" y2="445" class="gnd-symbol"/>
  
  <!-- Connect control signals -->
  <line x1="1010" y1="430" x2="1100" y2="430" class="wire"/>
  <line x1="1100" y1="430" x2="1100" y2="385" class="wire"/>
  <line x1="1100" y1="385" x2="1200" y2="385" class="wire"/>
  <text x="1130" y="380" class="net-label">TX_EN</text>
  
  <line x1="1010" y1="450" x2="1120" y2="450" class="wire"/>
  <line x1="1120" y1="450" x2="1120" y2="405" class="wire"/>
  <line x1="1120" y1="405" x2="1200" y2="405" class="wire"/>
  <text x="1150" y="400" class="net-label">IRQ</text>
  
  <!-- MCLR to J2 -->
  <line x1="450" y1="550" x2="450" y2="300" class="wire"/>
  <line x1="450" y1="300" x2="1200" y2="300" class="wire"/>
  <line x1="1200" y1="300" x2="1200" y2="365" class="wire"/>
  
  <!-- ==================== RF OUTPUT SECTION ==================== -->
  <text x="1100" y="480" class="ref-text" style="font-size:11px">RF OUTPUT (125kHz)</text>
  
  <!-- RF_OUT from PIC32 -->
  <line x1="1010" y1="500" x2="1100" y2="500" class="wire"/>
  <text x="1050" y="495" class="net-label">RF_OUT</text>
  
  <!-- R6 Antenna Bias -->
  <rect x="1100" y="493" width="40" height="14" stroke="#990000" stroke-width="1.5" fill="none"/>
  <text x="1120" y="488" class="ref-text">R6</text>
  <text x="1145" y="503" class="value-text">1MΩ</text>
  <line x1="1140" y1="500" x2="1200" y2="500" class="wire"/>
  <circle cx="1200" cy="500" r="3" class="dot"/>
  
  <!-- Antenna Tuning Capacitors -->
  <line x1="1200" y1="500" x2="1200" y2="530" class="component"/>
  <line x1="1190" y1="530" x2="1210" y2="530" class="component" stroke-width="3"/>
  <line x1="1190" y1="538" x2="1210" y2="538" class="component" stroke-width="3"/>
  <line x1="1200" y1="538" x2="1200" y2="560" class="component"/>
  <text x="1215" y="538" class="ref-text">C12</text>
  <text x="1215" y="550" class="value-text">4.7nF</text>
  <line x1="1190" y1="560" x2="1210" y2="560" class="gnd-symbol"/>
  
  <line x1="1250" y1="500" x2="1250" y2="530" class="component"/>
  <line x1="1240" y1="530" x2="1260" y2="530" class="component" stroke-width="3"/>
  <line x1="1240" y1="538" x2="1260" y2="538" class="component" stroke-width="3"/>
  <line x1="1250" y1="538" x2="1250" y2="560" class="component"/>
  <text x="1265" y="538" class="ref-text">C13</text>
  <text x="1265" y="550" class="value-text">4.7nF</text>
  <line x1="1240" y1="560" x2="1260" y2="560" class="gnd-symbol"/>
  <line x1="1200" y1="500" x2="1250" y2="500" class="wire"/>
  <circle cx="1250" cy="500" r="2" class="dot"/>
  
  <line x1="1300" y1="500" x2="1300" y2="530" class="component"/>
  <line x1="1290" y1="530" x2="1310" y2="530" class="component" stroke-width="3"/>
  <line x1="1290" y1="538" x2="1310" y2="538" class="component" stroke-width="3"/>
  <line x1="1300" y1="538" x2="1300" y2="560" class="component"/>
  <text x="1315" y="538" class="ref-text">C14</text>
  <text x="1315" y="550" class="value-text">4.7nF</text>
  <line x1="1290" y1="560" x2="1310" y2="560" class="gnd-symbol"/>
  <line x1="1250" y1="500" x2="1300" y2="500" class="wire"/>
  <circle cx="1300" cy="500" r="2" class="dot"/>
  
  <!-- J4 Antenna Connector -->
  <line x1="1300" y1="500" x2="1400" y2="500" class="wire"/>
  <rect x="1400" y="480" width="80" height="60" class="ic-body-small"/>
  <text x="1440" y="510" text-anchor="middle" class="ref-text">J4</text>
  <text x="1440" y="525" text-anchor="middle" class="value-text">ANTENNA</text>
  <text x="1395" y="498" text-anchor="end" class="pin-text">1</text>
  <text x="1485" y="498" class="pin-text">COIL_A</text>
  <line x1="1480" y1="520" x2="1500" y2="520" class="gnd-wire"/>
  <text x="1395" y="523" text-anchor="end" class="pin-text">2</text>
  <text x="1485" y="523" class="pin-text">GND</text>
  <line x1="1500" y1="520" x2="1500" y2="540" class="gnd-wire"/>
  <line x1="1490" y1="540" x2="1510" y2="540" class="gnd-symbol"/>
  
  <!-- Antenna Coil Symbol -->
  <text x="1550" y="480" class="ref-text">L1</text>
  <text x="1550" y="495" class="value-text">150µH</text>
  <text x="1550" y="510" class="value-text">Antenna</text>
  <line x1="1520" y1="500" x2="1540" y2="500" class="component"/>
  <ellipse cx="1550" cy="510" rx="8" ry="15" stroke="#990000" stroke-width="1.5" fill="none"/>
  <ellipse cx="1550" cy="530" rx="8" ry="15" stroke="#990000" stroke-width="1.5" fill="none"/>
  <line x1="1540" y1="545" x2="1540" y2="570" class="component"/>
  <line x1="1530" y1="570" x2="1550" y2="570" class="gnd-symbol"/>
  
  <!-- ==================== SIGNAL CONDITIONING ==================== -->
  <text x="50" y="920" class="ref-text" style="font-size:12px">SIGNAL CONDITIONING</text>
  
  <!-- U3 - LM358 Op-Amp -->
  <polygon points="150,950 150,1020 230,985" stroke="#000" stroke-width="2" fill="#FFFFCC"/>
  <text x="180" y="985" text-anchor="middle" class="ref-text">U3</text>
  <text x="180" y="1000" text-anchor="middle" class="value-text">LM358</text>
  
  <!-- Op-amp inputs -->
  <line x1="100" y1="965" x2="150" y2="965" class="wire"/>
  <text x="145" y="968" text-anchor="end" class="pin-text">+</text>
  <text x="145" y="958" text-anchor="end" class="pin-num">3</text>
  
  <line x1="100" y1="1005" x2="150" y2="1005" class="wire"/>
  <text x="145" y="1008" text-anchor="end" class="pin-text">-</text>
  <text x="145" y="998" text-anchor="end" class="pin-num">2</text>
  
  <!-- Op-amp output -->
  <line x1="230" y1="985" x2="280" y2="985" class="wire"/>
  <text x="235" y="978" class="pin-num">1</text>
  <text x="260" y="978" class="net-label">OPAMP_OUT</text>
  
  <!-- R5 Input Resistor -->
  <rect x="50" y="958" width="35" height="14" stroke="#990000" stroke-width="1.5" fill="none"/>
  <line x1="30" y1="965" x2="50" y2="965" class="wire"/>
  <line x1="85" y1="965" x2="100" y2="965" class="wire"/>
  <text x="68" y="953" class="ref-text">R5</text>
  <text x="68" y="983" class="value-text">100kΩ</text>
  <text x="25" y="960" text-anchor="end" class="net-label">RF_IN</text>
  
  <!-- R4 Feedback Resistor -->
  <line x1="250" y1="985" x2="250" y2="930" class="wire"/>
  <rect x="200" y="923" width="35" height="14" stroke="#990000" stroke-width="1.5" fill="none"/>
  <line x1="200" y1="930" x2="130" y2="930" class="wire"/>
  <line x1="130" y1="930" x2="130" y2="1005" class="wire"/>
  <line x1="130" y1="1005" x2="100" y2="1005" class="wire"/>
  <text x="218" y="918" class="ref-text">R4</text>
  <text x="218" y="948" class="value-text">100kΩ</text>
  <circle cx="250" cy="985" r="2" class="dot"/>
  <circle cx="130" cy="1005" r="2" class="dot"/>
  <text x="160" y="925" class="net-label">OPAMP_FB</text>
  
  <!-- U4 - Schmitt Trigger -->
  <rect x="320" y="965" width="70" height="40" class="ic-body-small"/>
  <text x="355" y="985" text-anchor="middle" class="ref-text">U4</text>
  <text x="355" y="998" text-anchor="middle" class="value-text">SN74LVC1G17</text>
  
  <line x1="280" y1="985" x2="320" y2="985" class="wire"/>
  <text x="315" y="978" text-anchor="end" class="pin-num">2</text>
  
  <line x1="390" y1="985" x2="450" y2="985" class="wire"/>
  <text x="395" y="978" class="pin-num">4</text>
  <text x="420" y="978" class="net-label">COIL_SENSE</text>
  
  <!-- Connect COIL_SENSE to PIC32 RB4/RF_IN (pin 12) -->
  <line x1="450" y1="985" x2="450" y2="520" class="wire"/>
  <line x1="450" y1="520" x2="610" y2="520" class="wire"/>
  <text x="530" y="515" class="net-label">RF_IN</text>
  
  <!-- Power for op-amp and Schmitt -->
  <line x1="190" y1="950" x2="190" y2="935" class="power-wire"/>
  <text x="195" y="940" class="net-label">+3V3</text>
  <line x1="190" y1="1020" x2="190" y2="1040" class="gnd-wire"/>
  <line x1="180" y1="1040" x2="200" y2="1040" class="gnd-symbol"/>
  
  <!-- ==================== ICSP PROGRAMMING ==================== -->
  <text x="1100" y="580" class="ref-text" style="font-size:11px">ICSP PROGRAMMING</text>
  
  <!-- J3 - ICSP Connector -->
  <rect x="1200" y="600" width="100" height="90" class="ic-body-small"/>
  <text x="1250" y="640" text-anchor="middle" class="ref-text">J3</text>
  <text x="1250" y="655" text-anchor="middle" class="value-text">ICSP</text>
  <text x="1250" y="670" text-anchor="middle" class="value-text">1x6 Header</text>
  
  <!-- J3 Pins -->
  <line x1="1100" y1="615" x2="1200" y2="615" class="wire"/>
  <text x="1195" y="618" text-anchor="end" class="pin-text">MCLR 1</text>
  
  <line x1="1100" y1="635" x2="1200" y2="635" class="wire"/>
  <text x="1195" y="638" text-anchor="end" class="pin-text">PGD 2</text>
  
  <line x1="1100" y1="655" x2="1200" y2="655" class="wire"/>
  <text x="1195" y="658" text-anchor="end" class="pin-text">PGC 3</text>
  
  <line x1="1200" y1="675" x2="1180" y2="675" class="gnd-wire"/>
  <text x="1195" y="678" text-anchor="end" class="pin-text">GND 4</text>
  <line x1="1180" y1="675" x2="1180" y2="695" class="gnd-wire"/>
  <line x1="1170" y1="695" x2="1190" y2="695" class="gnd-symbol"/>
  
  <!-- Connect ICSP signals -->
  <line x1="1010" y1="570" x2="1050" y2="570" class="wire"/>
  <line x1="1050" y1="570" x2="1050" y2="655" class="wire"/>
  <line x1="1050" y1="655" x2="1100" y2="655" class="wire"/>
  <text x="1060" y="650" class="net-label">PGC</text>
  
  <line x1="1010" y1="590" x2="1070" y2="590" class="wire"/>
  <line x1="1070" y1="590" x2="1070" y2="635" class="wire"/>
  <line x1="1070" y1="635" x2="1100" y2="635" class="wire"/>
  <text x="1080" y="630" class="net-label">PGD</text>
  
  <!-- MCLR to J3 -->
  <line x1="1200" y1="300" x2="1200" y2="280" class="wire"/>
  <line x1="1200" y1="280" x2="1090" y2="280" class="wire"/>
  <line x1="1090" y1="280" x2="1090" y2="615" class="wire"/>
  <line x1="1090" y1="615" x2="1100" y2="615" class="wire"/>
  <circle cx="1200" cy="300" r="2" class="dot"/>
  
  <!-- ==================== NOTES ==================== -->
  <text x="50" y="1080" class="ref-text" style="font-size:11px">DESIGN NOTES:</text>
  <text x="50" y="1095" class="value-text">• All VDD pins connected to +3V3 rail</text>
  <text x="50" y="1110" class="value-text">• All VSS pins connected to GND</text>
  <text x="50" y="1125" class="value-text">• SPI: SDI1=pin25, SDO1=pin72, SCK1=pin70, SS1=pin69</text>
  <text x="50" y="1140" class="value-text">• Control: RA0/TX_EN=pin17, RA1/IRQ=pin38</text>
  <text x="50" y="1155" class="value-text">• RF: RB5/RF_OUT=pin18, RB4/RF_IN=pin12</text>
  <text x="50" y="1170" class="value-text">• ICSP: PGEC2=pin26, PGED2=pin27</text>
  
  <text x="500" y="1095" class="value-text">• Crystal: 8MHz with 18pF load caps</text>
  <text x="500" y="1110" class="value-text">• VCAP: 10µF capacitor required on pin 85</text>
  <text x="500" y="1125" class="value-text">• Antenna tuning: 3x 4.7nF = 14.1nF total</text>
  <text x="500" y="1140" class="value-text">• LED current: (3.3V-2V)/330Ω = 4mA</text>
  <text x="500" y="1155" class="value-text">• SPI series resistors: 100Ω for signal integrity</text>
  
</svg>
